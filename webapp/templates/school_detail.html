{% extends 'base.html' %}

{% block content %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/fslightbox/3.4.1/index.min.js"></script>

<style>
    .gallery-container {
        margin-top: 180px; 
        margin-bottom: 50px;
        padding: 0 15px;
        font-family: 'Sarabun', sans-serif;
    }

    .school-header {
        text-align: center;
        margin-bottom: 30px;
    }

    .school-header h2 {
        font-size: 2.2rem;
        color: #2e7d32;
        font-weight: bold;
        margin-bottom: 5px;
    }

    .school-date-info {
        font-size: 1.2rem;
        color: #666;
    }

    /* Grid layout */
    .photo-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
    }

    @media (min-width: 768px) {
        .photo-grid { grid-template-columns: repeat(4, 1fr); }
    }

    @media (min-width: 1200px) {
        .photo-grid { grid-template-columns: repeat(6, 1fr); }
    }

    /* Hover Zoom Effect */
    .photo-item {
        background-color: #eee;
        border-radius: 4px;
        position: relative;
        aspect-ratio: 4 / 3;
    }

    .photo-item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
        border-radius: 4px;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        transform-origin: center;
    }

    .photo-item:hover {
        z-index: 100;
    }

    .photo-item:hover img {
        transform: scale(1.6);
        box-shadow: 0 15px 30px rgba(0,0,0,0.4);
        cursor: pointer;
        border: 2px solid #fff;
    }

    .back-button-container {
        margin-top: 40px;
        text-align: center;
    }
</style>

<div class="container gallery-container animate__animated animate__fadeIn">
    <div class="school-header">
        <h2>{{ school.name }}</h2>
        <p class="school-date-info">กิจกรรมวันที่: {{ school.date_info }}</p>
        <hr style="width: 60px; border: 2px solid #2e7d32; margin: 20px auto;">
    </div>

    <div class="photo-grid">
        {% for img in images %}
            <div class="photo-item">
                <a data-fslightbox="gallery" href="{{ img.image.url }}">
                    <img src="{{ img.image.url }}" alt="{{ school.name }}">
                </a>
            </div>
        {% empty %}
            <div style="grid-column: 1 / -1; text-align: center; padding: 50px;">
                <p class="text-muted">กำลังทยอยอัปโหลดรูปภาพกิจกรรม...</p>
            </div>
        {% endfor %}
    </div>

    <div class="back-button-container">
        <a href="{% url 'picture' %}" class="btn btn-secondary px-4">ย้อนกลับ</a>
    </div>
</div>

<script>
    /* สคริปต์เสริมเพื่อบังคับให้ refresh lightbox เมื่อข้อมูลเปลี่ยน (ถ้าจำเป็น) */
    refreshFsLightbox();
</script>
{% endblock %}